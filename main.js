(()=>{"use strict";const t=new class{constructor(){this.amountLines=4,this.amountСolumns=4,this.indexGoblin=null,this.interval=1e3,this.timetId=null,this.board=document.querySelector(".board"),this.elements=[],this.countShow=0,this.containerShow=document.querySelector(".control_show span")}startGame(){this.createItemBoard(this.board),this.generateGoblin(),this.intervalGenerateGoblin(this.interval)}createItemBoard(t){for(let e=0;e<this.amountLines;e+=1){const e=document.createElement("tr");t.appendChild(e);for(let t=0;t<this.amountСolumns;t+=1){const t=document.createElement("td");e.appendChild(t),t.classList.add("board-item")}}return t}clearBoard(){for(;this.board.lastElementChild;)this.board.removeChild(this.board.lastElementChild)}clearAll(){this.elements=document.getElementsByTagName("td");for(let t=0;t<this.elements.length;t+=1)this.elements[t].className="board-item"}generateGoblin(){this.elements=document.getElementsByTagName("td");const t=Math.floor(Math.random()*this.elements.length);t===this.indexGoblin?this.generateGoblin():(this.indexGoblin=t,this.elements[t].classList.add("goblin"))}intervalGenerateGoblin(t){this.timetId=setInterval((()=>{this.clearAll(),this.generateGoblin(),this.countShow+=1,this.containerShow.textContent=this.countShow}),t)}stopGenerateGoblin(){clearInterval(this.timetId),this.clearAll()}},e=new class{constructor(t){this.gameManager=t,this.button=document.querySelector(".button"),this.miss=document.querySelector(".miss"),this.wins=document.querySelector(".wins"),this.modal=document.querySelector(".modal"),this.countWins=0,this.countMiss=0,this.countShow=this.gameManager.countShow,this.eventShow=null,this.containerWins=document.querySelector(".control_wins span"),this.containerMiss=document.querySelector(".control_miss span")}init(){this.gameManager.startGame(),this.clickItem(),this.eventShowGoblin(this.gameManager.interval),this.button.addEventListener("click",this.onClickNewGame())}clickItem(){const t=document.getElementsByTagName("td");for(let e=0;e<t.length;e+=1)t[e].addEventListener("click",(()=>{t[e].classList.contains("goblin")?(this.countWins+=1,this.containerWins.textContent=this.countWins,t[e].className="board-item"):(this.countMiss+=1,this.containerMiss.textContent=this.countMiss),this.countsControl(this.gameManager.countShow,this.countMiss,this.countWins)}))}eventShowGoblin(t){this.eventShow=setInterval((()=>{this.countsControl(this.gameManager.countShow,this.countMiss,this.countWins)}),t)}showModal(){this.modal.classList.remove("hidden"),this.button.classList.remove("hidden"),this.gameManager.stopGenerateGoblin(),clearInterval(this.eventShow)}closeModal(){this.modal.classList.add("hidden"),this.button.classList.add("hidden"),this.miss.classList.contains("hidden")||this.miss.classList.add("hidden"),this.wins.classList.contains("hidden")||this.wins.classList.add("hidden")}onClickNewGame(){this.button.addEventListener("click",(()=>{this.resetCounts(),this.closeModal(),this.button.removeEventListener("click",this.onClickNewGame),this.gameManager.clearBoard(),this.gameManager.stopGenerateGoblin(),clearInterval(this.eventShow),this.init()}))}countsControl(t,e,s){(t-s>=5||e>=5)&&(this.showModal(),this.miss.classList.remove("hidden")),s>=10&&(this.showModal(),this.wins.classList.remove("hidden"))}resetCounts(){this.countMiss=0,this.countWins=0,this.gameManager.countShow=0,this.containerWins.textContent=this.countWins,this.containerMiss.textContent=this.countMiss,this.gameManager.containerShow.textContent=this.gameManager.countShow}}(t);e.init()})();